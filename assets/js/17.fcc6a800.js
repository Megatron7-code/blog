(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{266:function(s,t,a){"use strict";a.r(t);var n=a(28),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("日常运维中服务器积累了大量的nginx访问日志，可以利用goaccess分析数据。")])]),s._v(" "),a("p",[s._v("找出一些有价值的线索。")]),s._v(" "),a("ul",[a("li",[s._v("1.使用设备占比（针对优化，可以很硬气的说我们不需要优化IE6，因为没有目标用户")]),s._v(" "),a("li",[s._v("2.找出人群分布，优化机器向所在地部署。加速访问")]),s._v(" "),a("li",[s._v("3.访问频率高的文件、接口，是否需要拆分")]),s._v(" "),a("li",[s._v("4.筛选爬虫特征（过滤掉")])]),s._v(" "),a("p",[s._v("结合现有的业务进行分析。。。")]),s._v(" "),a("p",[s._v("goaccess提供了终端显示、HTML、csv等访问数据的方式。\n这里依次讲解使用细则。（安装步骤省略，请自行百度）")]),s._v(" "),a("p",[s._v("首先放出一张网络结构图。\n"),a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2Jsb2ctcmVzLnZtMzIxLmNvbS8xNTg2Mzk2ODI4MDQ1LmpwZw?x-oss-process=image/format,png",alt:"网络结构示意图"}})]),s._v(" "),a("h4",{attrs:{id:"生成html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成html"}},[s._v("#")]),s._v(" 生成HTML")]),s._v(" "),a("blockquote",[a("p",[s._v("这里的实现思路是把分布在多台机器上的日志汇总到一起，来进行分析。\n这里涉及到：logrotate、nginx access_log配置、scp、rsyslog(放弃，依赖性比较强)、goaccess常规命令")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据已脱敏")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOCK_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/tmp/my.lock"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -o noclobber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$$")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOCK_NAME")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v(" /dev/null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("trap")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rm -f \""),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOCK_NAME")]),s._v('"; exit '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("'")]),s._v(" INT "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("TERM")]),s._v(" EXIT\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATE_TIME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y%m%d"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("P_INDEX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[32m1.开始拉取各平台日志"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.2"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.0.0.3"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("P_INDEX"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" work@"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(":/nginx_access.log-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATE_TIME}")]),s._v(".gz nginx_access-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATE_TIME}")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$P_INDEX")]),s._v(".gz\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" goaccess\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[32m2.开始处理日志"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nzcat nginx_access-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATE_TIME}")]),s._v("-*.gz goaccess-1.3/goaccess -p goaccess.conf -o ./nginx_access_"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATE_TIME}")]),s._v(".html -\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ./nginx_request_log.sh\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v("[32m3.开始同步html"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[s._v("\\033")]),s._v('[0m"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" nginx_access_"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATE_TIME}")]),s._v(".html work@10.0.0.8:/goaccess\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf nginx_access-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATE_TIME}")]),s._v("*\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOCK_NAME")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("trap")]),s._v(" - INT "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("TERM")]),s._v(" EXIT\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Failed to acquire lockfile: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOCK_NAME")]),s._v('."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Held by '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $LOCK_NAME"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])])]),a("p",[s._v("这样在10.0.0.8机器挂上nginx就能访问了。\n"),a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2Jsb2ctcmVzLnZtMzIxLmNvbS8xNTg2Mzk3NDQwNTE4LmpwZw?x-oss-process=image/format,png",alt:""}})]),s._v(" "),a("h4",{attrs:{id:"终端显示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#终端显示"}},[s._v("#")]),s._v(" 终端显示")]),s._v(" "),a("p",[s._v("终端显示的话就比较简单了")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("/usr/bin/goaccess -f access.log\n")])])]),a("p",[a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2Jsb2ctcmVzLnZtMzIxLmNvbS8xNTg2Mzk3NzY4MjYzLmpwZw?x-oss-process=image/format,png",alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("利用webshell也可以把内容打到web浏览器上，方便查看")])]),s._v(" "),a("h4",{attrs:{id:"csv格式的运用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csv格式的运用"}},[s._v("#")]),s._v(" csv格式的运用")]),s._v(" "),a("p",[s._v("我们把csv格式的数据导出后，存进db。这样方便对每日的数据进行归总，查询流量趋势。\n当然也可以自行设计报表，方便统计。")]),s._v(" "),a("blockquote",[a("p",[s._v("实现上和HTML的处理差不多，把最终得到的CSV格式的数据通过脚本打到web应用。\n进行持久化，当然纯shell也是可以直接操作DB的。")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# shell中直接通过命令行导入csv")]),s._v("\nload data infile "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'需要导入的文件全名'")]),s._v(" into table 将要导入的数据库表名 fields terminated by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'列的分隔符'")]),s._v(" optionally enclosed by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\"'")]),s._v(" escaped by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\"'")]),s._v(" lines terminated by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'回车换行符'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 采用shell发送http的形式是考虑到db接入层一致的问题")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATE_TIME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y%m%d"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEBUG")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DEBUG")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test env'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://127.0.0.1/webserver'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("nginx_request_log")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx_access_test.csv'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'prod env'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里最好使用内网域名，以免机器迁移访问失效")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://10.0.0.7/webserver'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("nginx_request_log")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx_access_\""),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DATE_TIME")]),s._v("\".csv'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("http_post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -X POST "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$nginx_request_log")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("line")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $nginx_request_log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" requests"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -vE "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"(static_requests|general)"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\",\"'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{OFS=",";print '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(","),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v(","),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v(","),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$4")]),s._v(","),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$5")]),s._v("}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据处理")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${str"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("?}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"['),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),s._v(']"')]),s._v("\n    http_post "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx_request_log not exists'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2Jsb2ctcmVzLnZtMzIxLmNvbS8yMDE5MTExMDEwMDk0OTI0Ni5qcGc?x-oss-process=image/format,png#pic_center",alt:"关注公号，领取学习资料"}}),s._v(" "),a("center",[s._v("关注公号，领取学习资料")])],1)])}),[],!1,null,null,null);t.default=e.exports}}]);